(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"2yxt":function(e,s,t){"use strict";t.r(s),t.d(s,"ChatModule",(function(){return C}));var n=t("ofXK"),c=t("3Pt+"),r=t("tyNb"),i=t("il7l"),a=t("fXoL");const o=function(e){return{"border-color":e}};let u=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=a.Db({type:e,selectors:[["app-chat-user"]],inputs:{user:"user"},decls:7,vars:5,consts:[[1,"chat-user"],["src","assets/images/avatar.png",1,"chat-user-avatar",3,"ngStyle"],[1,"chat-user-details"]],template:function(e,s){1&e&&(a.Ob(0,"div",0),a.Kb(1,"img",1),a.Ob(2,"div",2),a.Ob(3,"h4"),a.ic(4),a.Nb(),a.Ob(5,"p"),a.ic(6),a.Nb(),a.Nb(),a.Nb()),2&e&&(a.zb(1),a.ac("ngStyle",a.bc(3,o,s.user.color?s.user.color:"#efefef")),a.zb(3),a.jc(s.user.name),a.zb(2),a.jc(s.user.id))},directives:[n.l],styles:[""]}),e})();function b(e,s){if(1&e&&(a.Mb(0),a.Ob(1,"li",2),a.Kb(2,"app-chat-user",3),a.Nb(),a.Lb()),2&e){const e=s.$implicit;a.zb(2),a.ac("user",e)}}function l(e,s){if(1&e&&(a.Ob(0,"ul"),a.hc(1,b,3,1,"ng-container",1),a.Nb()),2&e){const e=a.Xb();a.zb(1),a.ac("ngForOf",e.users)}}let g=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=a.Db({type:e,selectors:[["app-chat-user-list"]],inputs:{users:"users"},decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"chat-user-item"],[3,"user"]],template:function(e,s){1&e&&a.hc(0,l,2,1,"ul",0),2&e&&a.ac("ngIf",s.users)},directives:[n.k,n.j,u],styles:[""]}),e})();const m=function(e,s){return{"chat-message-right":e,"chat-message-left":s}};function h(e,s){if(1&e&&(a.Ob(0,"div",1),a.Ob(1,"div",2),a.Kb(2,"img",3),a.Nb(),a.Ob(3,"div",4),a.Ob(4,"p"),a.ic(5),a.Nb(),a.Ob(6,"span"),a.ic(7),a.Yb(8,"date"),a.Nb(),a.Nb(),a.Nb()),2&e){const e=a.Xb();a.ac("ngClass",a.cc(7,m,e.user.id===e.message.user.id,e.user.id!==e.message.user.id)),a.zb(5),a.jc(e.message.message),a.zb(2),a.kc("",a.Zb(8,4,null==e.message?null:e.message.timestamp,"short")," (",null==e.message||null==e.message.user?null:e.message.user.name,")")}}let f=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=a.Db({type:e,selectors:[["app-chat-message"]],inputs:{message:"message",user:"user"},decls:1,vars:1,consts:[["class","chat-message",3,"ngClass",4,"ngIf"],[1,"chat-message",3,"ngClass"],[1,"chat-message-user"],["src","assets/images/avatar.png",1,"chat-message-user-avatar"],[1,"chat-message-container"]],template:function(e,s){1&e&&a.hc(0,h,9,10,"div",0),2&e&&a.ac("ngIf",s.message)},directives:[n.k,n.i],pipes:[n.d],styles:[".chat-message-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem}.chat-message-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#bcbcbc;font-size:.7rem;font-style:italic}"]}),e})();function p(e,s){if(1&e&&(a.Mb(0),a.Ob(1,"li"),a.Kb(2,"app-chat-message",2),a.Nb(),a.Lb()),2&e){const e=s.$implicit,t=a.Xb(2);a.zb(2),a.ac("user",t.user)("message",e)}}function d(e,s){if(1&e&&(a.Ob(0,"ul"),a.hc(1,p,3,2,"ng-container",1),a.Nb()),2&e){const e=a.Xb();a.zb(1),a.ac("ngForOf",e.messages)}}let v=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=a.Db({type:e,selectors:[["app-chat-message-list"]],inputs:{messages:"messages",user:"user"},decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"user","message"]],template:function(e,s){1&e&&a.hc(0,d,2,1,"ul",0),2&e&&a.ac("ngIf",s.messages)},directives:[n.k,n.j,f],styles:[""]}),e})();var O=t("EcEN");let N=(()=>{class e{constructor(e,s){this._chatService=e,this._formBuilder=s}ngOnInit(){this._chatService.user.subscribe(e=>this.user=e),this.form=this._formBuilder.group({message:["",[c.i.required]]})}send(e){e.id=Object(O.v4)(),e.timestamp=new Date,e.user=this.user,this._chatService.send(e),this.form.reset()}}return e.\u0275fac=function(s){return new(s||e)(a.Jb(i.a),a.Jb(c.b))},e.\u0275cmp=a.Db({type:e,selectors:[["app-chat-message-form"]],decls:5,vars:2,consts:[["novalidate","",3,"formGroup","ngSubmit"],[1,"form-group","form-group-inline"],["placeholder","Send a message...","type","text","formControlName","message",1,"form-control","form-control-lg",2,"text-align","left"],["role","button","type","submit",1,"btn","btn-info",2,"width","200px",3,"disabled"]],template:function(e,s){1&e&&(a.Ob(0,"form",0),a.Vb("ngSubmit",(function(){return s.send(s.form.value)})),a.Ob(1,"div",1),a.Kb(2,"input",2),a.Ob(3,"button",3),a.ic(4,"Send"),a.Nb(),a.Nb(),a.Nb()),2&e&&(a.ac("formGroup",s.form),a.zb(3),a.ac("disabled",s.form.invalid))},directives:[c.j,c.g,c.d,c.a,c.f,c.c],styles:[""]}),e})();const y=["messageList"],w=function(e){return{show:e}},z=[{path:"",component:(()=>{class e{constructor(e,s){this._chatService=e,this._router=s,this.messages=[],this.showMobileMenu=!1}ngOnInit(){this._chatService.user.subscribe(e=>this.user=Object.assign({},e)),this._chatService.users.subscribe(e=>this.users=e),this._chatService.message.subscribe(e=>this.messages.push(e))}ngAfterViewChecked(){this.scrollToBottom()}disconnect(){this._chatService.disconnect(),this._router.navigate(["connect"])}toggle(){this.showMobileMenu=!this.showMobileMenu}scrollToBottom(){try{this.messageListContainer.nativeElement.scrollTop=this.messageListContainer.nativeElement.scrollHeight}catch(e){}}onResize(e){this.showMobileMenu=e.target.innerWidth>835}}return e.\u0275fac=function(s){return new(s||e)(a.Jb(i.a),a.Jb(r.a))},e.\u0275cmp=a.Db({type:e,selectors:[["app-chat-room"]],viewQuery:function(e,s){var t;1&e&&a.lc(y,!0),2&e&&a.dc(t=a.Wb())&&(s.messageListContainer=t.first)},hostBindings:function(e,s){1&e&&a.Vb("resize",(function(e){return s.onResize(e)}),!1,a.ec)},decls:18,vars:6,consts:[[1,"chat-room"],[1,"chat-user-list","hidden",3,"ngClass"],[1,"mobile-toggler",3,"click"],[1,"toggler"],[1,"user-list"],[3,"users"],[1,"disconnect"],["role","button","type","button",1,"btn","btn-danger",3,"click"],[1,"chat-message-list"],["messageList",""],[1,"chat-message-content"],[3,"messages","user"],[1,"chat-message-input"]],template:function(e,s){1&e&&(a.Ob(0,"div",0),a.Ob(1,"div",1),a.Ob(2,"div",2),a.Vb("click",(function(){return s.toggle()})),a.Ob(3,"div",3),a.Kb(4,"div"),a.Kb(5,"div"),a.Kb(6,"div"),a.Nb(),a.Nb(),a.Ob(7,"div",4),a.Kb(8,"app-chat-user-list",5),a.Nb(),a.Ob(9,"div",6),a.Ob(10,"button",7),a.Vb("click",(function(){return s.disconnect()})),a.ic(11,"Disconnect"),a.Nb(),a.Nb(),a.Nb(),a.Ob(12,"div",8,9),a.Ob(14,"div",10),a.Kb(15,"app-chat-message-list",11),a.Nb(),a.Ob(16,"div",12),a.Kb(17,"app-chat-message-form"),a.Nb(),a.Nb(),a.Nb()),2&e&&(a.zb(1),a.ac("ngClass",a.bc(4,w,s.showMobileMenu)),a.zb(7),a.ac("users",s.users),a.zb(7),a.ac("messages",s.messages)("user",s.user))},directives:[n.i,g,v,N],styles:[""]}),e})()}];let M=(()=>{class e{}return e.\u0275mod=a.Hb({type:e}),e.\u0275inj=a.Gb({factory:function(s){return new(s||e)},imports:[[r.b.forChild(z)],r.b]}),e})(),C=(()=>{class e{}return e.\u0275mod=a.Hb({type:e}),e.\u0275inj=a.Gb({factory:function(s){return new(s||e)},imports:[[M,n.b,c.e,c.h]]}),e})()}}]);