function _classCallCheck(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,s){for(var t=0;t<s.length;t++){var n=s[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,s,t){return s&&_defineProperties(e.prototype,s),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"2yxt":function(e,s,t){"use strict";t.r(s),t.d(s,"ChatModule",(function(){return D}));var n,i=t("ofXK"),c=t("3Pt+"),a=t("tyNb"),r=t("il7l"),o=t("fXoL"),u=function(e){return{"border-color":e}},l=((n=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Db({type:n,selectors:[["app-chat-user"]],inputs:{user:"user"},decls:7,vars:5,consts:[[1,"chat-user"],["src","assets/images/avatar.png",1,"chat-user-avatar",3,"ngStyle"],[1,"chat-user-details"]],template:function(e,s){1&e&&(o.Ob(0,"div",0),o.Kb(1,"img",1),o.Ob(2,"div",2),o.Ob(3,"h4"),o.ic(4),o.Nb(),o.Ob(5,"p"),o.ic(6),o.Nb(),o.Nb(),o.Nb()),2&e&&(o.zb(1),o.ac("ngStyle",o.bc(3,u,s.user.color?s.user.color:"#efefef")),o.zb(3),o.jc(s.user.name),o.zb(2),o.jc(s.user.id))},directives:[i.l],styles:[""]}),n);function b(e,s){if(1&e&&(o.Mb(0),o.Ob(1,"li",2),o.Kb(2,"app-chat-user",3),o.Nb(),o.Lb()),2&e){var t=s.$implicit;o.zb(2),o.ac("user",t)}}function f(e,s){if(1&e&&(o.Ob(0,"ul"),o.hc(1,b,3,1,"ng-container",1),o.Nb()),2&e){var t=o.Xb();o.zb(1),o.ac("ngForOf",t.users)}}var g,m=((g=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||g)},g.\u0275cmp=o.Db({type:g,selectors:[["app-chat-user-list"]],inputs:{users:"users"},decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"chat-user-item"],[3,"user"]],template:function(e,s){1&e&&o.hc(0,f,2,1,"ul",0),2&e&&o.ac("ngIf",s.users)},directives:[i.k,i.j,l],styles:[""]}),g),h=function(e,s){return{"chat-message-right":e,"chat-message-left":s}};function p(e,s){if(1&e&&(o.Ob(0,"div",1),o.Ob(1,"div",2),o.Kb(2,"img",3),o.Nb(),o.Ob(3,"div",4),o.Ob(4,"p"),o.ic(5),o.Nb(),o.Ob(6,"span"),o.ic(7),o.Yb(8,"date"),o.Nb(),o.Nb(),o.Nb()),2&e){var t=o.Xb();o.ac("ngClass",o.cc(7,h,t.user.id===t.message.user.id,t.user.id!==t.message.user.id)),o.zb(5),o.jc(t.message.message),o.zb(2),o.kc("",o.Zb(8,4,null==t.message?null:t.message.timestamp,"short")," (",null==t.message||null==t.message.user?null:t.message.user.name,")")}}var d,v=((d=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||d)},d.\u0275cmp=o.Db({type:d,selectors:[["app-chat-message"]],inputs:{message:"message",user:"user"},decls:1,vars:1,consts:[["class","chat-message",3,"ngClass",4,"ngIf"],[1,"chat-message",3,"ngClass"],[1,"chat-message-user"],["src","assets/images/avatar.png",1,"chat-message-user-avatar"],[1,"chat-message-container"]],template:function(e,s){1&e&&o.hc(0,p,9,10,"div",0),2&e&&o.ac("ngIf",s.message)},directives:[i.k,i.i],pipes:[i.d],styles:[".chat-message-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem}.chat-message-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#bcbcbc;font-size:.7rem;font-style:italic}"]}),d);function O(e,s){if(1&e&&(o.Mb(0),o.Ob(1,"li"),o.Kb(2,"app-chat-message",2),o.Nb(),o.Lb()),2&e){var t=s.$implicit,n=o.Xb(2);o.zb(2),o.ac("user",n.user)("message",t)}}function y(e,s){if(1&e&&(o.Ob(0,"ul"),o.hc(1,O,3,2,"ng-container",1),o.Nb()),2&e){var t=o.Xb();o.zb(1),o.ac("ngForOf",t.messages)}}var C,_,k,N,w,z=((C=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||C)},C.\u0275cmp=o.Db({type:C,selectors:[["app-chat-message-list"]],inputs:{messages:"messages",user:"user"},decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"user","message"]],template:function(e,s){1&e&&o.hc(0,y,2,1,"ul",0),2&e&&o.ac("ngIf",s.messages)},directives:[i.k,i.j,v],styles:[""]}),C),M=t("EcEN"),S=((_=function(){function e(s,t){_classCallCheck(this,e),this._chatService=s,this._formBuilder=t}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this._chatService.user.subscribe((function(s){return e.user=s})),this.form=this._formBuilder.group({message:["",[c.i.required]]})}},{key:"send",value:function(e){e.id=Object(M.v4)(),e.timestamp=new Date,e.user=this.user,this._chatService.send(e),this.form.reset()}}]),e}()).\u0275fac=function(e){return new(e||_)(o.Jb(r.a),o.Jb(c.b))},_.\u0275cmp=o.Db({type:_,selectors:[["app-chat-message-form"]],decls:5,vars:2,consts:[["novalidate","",3,"formGroup","ngSubmit"],[1,"form-group","form-group-inline"],["placeholder","Send a message...","type","text","formControlName","message",1,"form-control","form-control-lg",2,"text-align","left"],["role","button","type","submit",1,"btn","btn-info",2,"width","200px",3,"disabled"]],template:function(e,s){1&e&&(o.Ob(0,"form",0),o.Vb("ngSubmit",(function(){return s.send(s.form.value)})),o.Ob(1,"div",1),o.Kb(2,"input",2),o.Ob(3,"button",3),o.ic(4,"Send"),o.Nb(),o.Nb(),o.Nb()),2&e&&(o.ac("formGroup",s.form),o.zb(3),o.ac("disabled",s.form.invalid))},directives:[c.j,c.g,c.d,c.a,c.f,c.c],styles:[""]}),_),I=["messageList"],K=function(e){return{show:e}},j=[{path:"",component:(k=function(){function e(s,t){_classCallCheck(this,e),this._chatService=s,this._router=t,this.messages=[],this.showMobileMenu=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this._chatService.user.subscribe((function(s){return e.user=Object.assign({},s)})),this._chatService.users.subscribe((function(s){return e.users=s})),this._chatService.message.subscribe((function(s){return e.messages.push(s)}))}},{key:"ngAfterViewChecked",value:function(){this.scrollToBottom()}},{key:"disconnect",value:function(){this._chatService.disconnect(),this._router.navigate(["connect"])}},{key:"toggle",value:function(){this.showMobileMenu=!this.showMobileMenu}},{key:"scrollToBottom",value:function(){try{this.messageListContainer.nativeElement.scrollTop=this.messageListContainer.nativeElement.scrollHeight}catch(e){}}},{key:"onResize",value:function(e){this.showMobileMenu=e.target.innerWidth>835}}]),e}(),k.\u0275fac=function(e){return new(e||k)(o.Jb(r.a),o.Jb(a.a))},k.\u0275cmp=o.Db({type:k,selectors:[["app-chat-room"]],viewQuery:function(e,s){var t;1&e&&o.lc(I,!0),2&e&&o.dc(t=o.Wb())&&(s.messageListContainer=t.first)},hostBindings:function(e,s){1&e&&o.Vb("resize",(function(e){return s.onResize(e)}),!1,o.ec)},decls:18,vars:6,consts:[[1,"chat-room"],[1,"chat-user-list","hidden",3,"ngClass"],[1,"mobile-toggler",3,"click"],[1,"toggler"],[1,"user-list"],[3,"users"],[1,"disconnect"],["role","button","type","button",1,"btn","btn-danger",3,"click"],[1,"chat-message-list"],["messageList",""],[1,"chat-message-content"],[3,"messages","user"],[1,"chat-message-input"]],template:function(e,s){1&e&&(o.Ob(0,"div",0),o.Ob(1,"div",1),o.Ob(2,"div",2),o.Vb("click",(function(){return s.toggle()})),o.Ob(3,"div",3),o.Kb(4,"div"),o.Kb(5,"div"),o.Kb(6,"div"),o.Nb(),o.Nb(),o.Ob(7,"div",4),o.Kb(8,"app-chat-user-list",5),o.Nb(),o.Ob(9,"div",6),o.Ob(10,"button",7),o.Vb("click",(function(){return s.disconnect()})),o.ic(11,"Disconnect"),o.Nb(),o.Nb(),o.Nb(),o.Ob(12,"div",8,9),o.Ob(14,"div",10),o.Kb(15,"app-chat-message-list",11),o.Nb(),o.Ob(16,"div",12),o.Kb(17,"app-chat-message-form"),o.Nb(),o.Nb(),o.Nb()),2&e&&(o.zb(1),o.ac("ngClass",o.bc(4,K,s.showMobileMenu)),o.zb(7),o.ac("users",s.users),o.zb(7),o.ac("messages",s.messages)("user",s.user))},directives:[i.i,m,z,S],styles:[""]}),k)}],P=((w=function e(){_classCallCheck(this,e)}).\u0275mod=o.Hb({type:w}),w.\u0275inj=o.Gb({factory:function(e){return new(e||w)},imports:[[a.b.forChild(j)],a.b]}),w),D=((N=function e(){_classCallCheck(this,e)}).\u0275mod=o.Hb({type:N}),N.\u0275inj=o.Gb({factory:function(e){return new(e||N)},imports:[[P,i.b,c.e,c.h]]}),N)}}]);